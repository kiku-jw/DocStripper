# SELF_TESTS.md

Тестовые случаи для DocStripper

## Тест 1: Удаление повторяющихся строк

**Входной файл:**
```
Это важная строка.
Это важная строка.
Это важная строка.
Уникальная строка.
Еще одна строка.
Еще одна строка.
```

**Ожидаемый результат:**
```
Это важная строка.
Уникальная строка.
Еще одна строка.
```

**Ожидаемая статистика:**
- Duplicates collapsed: 2
- Lines removed: 2

---

## Тест 2: Удаление номеров страниц и заголовков

**Входной файл:**
```
Page 1 of 10
Документ начинается здесь.
3
4
5
Page 2 of 10
Продолжение документа.
```

**Ожидаемый результат:**
```
Документ начинается здесь.
Продолжение документа.
```

**Ожидаемая статистика:**
- Header/footer removed: 5
- Lines removed: 5

---

## Тест 3: Удаление пустых строк и пробелов

**Входной файл:**
```
Первая строка.


Вторая строка.
   
Третья строка.
```

**Ожидаемый результат:**
```
Первая строка.
Вторая строка.
Третья строка.
```

**Ожидаемая статистика:**
- Empty lines removed: 4

---

## Тест 4: Комплексный тест с различными типами мусора

**Входной файл:**
```
Confidential
Page 1 of 5

Основной текст документа.
Основной текст документа.

1
2
3

DRAFT
Важная информация.
Page 2 of 5
```

**Ожидаемый результат:**
```
Основной текст документа.
Важная информация.
```

**Ожидаемая статистика:**
- Lines removed: 10
- Duplicates collapsed: 1
- Empty lines removed: 2
- Header/footer removed: 7

---

## Тест 5: Обработка DOCX файла

**Предварительные условия:**
- Создать тестовый DOCX файл с содержимым из Теста 1

**Команда:**
```bash
python tool.py test.docx
```

**Ожидаемое поведение:**
- Файл должен быть обработан
- Создан backup файл test.docx.bak
- Текст должен быть очищен аналогично Тесту 1

---

## Как запустить тесты

1. Создайте тестовые файлы с содержимым из примеров выше
2. Запустите DocStripper в режиме dry-run:
```bash
python tool.py --dry-run test1.txt
```
3. Проверьте вывод статистики
4. Запустите реальную обработку:
```bash
python tool.py test1.txt
```
5. Проверьте результат и сравните с ожидаемым
6. При необходимости выполните откат:
```bash
python tool.py --undo
```

## Примечания

- Все тесты должны выполняться на Python 3.9+
- Для тестов с PDF требуется установленный pdftotext
- Резервные копии (.bak) можно использовать для сравнения результатов



